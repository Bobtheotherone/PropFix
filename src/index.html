<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PropFix Photo Editor</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: file:; style-src 'self' 'unsafe-inline'; script-src 'self'; connect-src http://127.0.0.1:5001;">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app">
    <aside class="left">
      <header class="left-header">
        <h1>Controls</h1>
        <div id="segmentsBanner" class="muted">No segments yet.</div>
      </header>

      <section class="panel">
        <div class="row compact">
          <label for="searchSeg">Find segment</label>
          <input id="searchSeg" type="text" placeholder="Search (e.g., arm, torso)" />
        </div>
        <div class="row compact">
          <label for="strength">Effect amount</label>
          <input id="strength" type="range" min="0" max="1" step="0.05" value="1" />
          <span id="strengthVal">100%</span>
        </div>
      </section>

      <section class="panel">
        <details open>
          <summary>Body</summary>
          <div id="group-body" class="group"></div>
        </details>
        <details>
          <summary>Arms</summary>
          <div id="group-arms" class="group"></div>
        </details>
        <details>
          <summary>Legs</summary>
          <div id="group-legs" class="group"></div>
        </details>
        <details>
          <summary>Hands & Feet</summary>
          <div id="group-extremities" class="group"></div>
        </details>
        <details>
          <summary>Other</summary>
          <div id="group-other" class="group"></div>
        </details>
      </section>

      <section class="panel footer-buttons">
        <button id="resetBtn" class="btn ghost">Reset All</button>
        <button id="logsBtn" class="btn ghost">Logs</button>
      </section>

      <section id="logsPane" class="panel hidden">
        <textarea id="logArea" readonly></textarea>
      </section>
    </aside>

    <main class="right">
      <header class="topbar">
        <input id="inputPath" type="text" placeholder="Full path to input image (e.g., C:\path\to\alpha.png)" />
        <div class="topbar-actions">
          <button id="annotateBtn" class="btn primary">Annotate</button>
          <div class="seg-count" id="segCount">â€“</div>
          <div class="divider"></div>
          <div class="zoom-controls">
            <button class="btn ghost" id="fitBtn" title="Fit to window">Fit</button>
            <button class="btn ghost" id="fillBtn" title="Fill width">Fill</button>
            <button class="btn ghost" id="oneBtn" title="1:1">1:1</button>
          </div>
        </div>
      </header>

      <section class="canvas">
        <div id="viewport" class="viewport fit">
          <img id="previewImg" alt="preview" />
        </div>
      </section>

      <footer id="statusBar" class="status">Idle.</footer>
    </main>
  </div>

  <script src="./renderer.js"></script>
</body>
</html>
